<section
  id="cora-compare-table-{{ section.id }}"
  class="cora-compare-table"
  style="
    {% if section.settings.bg_image != blank %}
      background-image: url('{{ section.settings.bg_image | image_url: width: 2000 }}');
      background-size: cover;
      background-position: center;
    {% else %}
      background-color: {{ section.settings.bg_color }};
    {% endif %}
  "
>
  {% if section.settings.overlay_color != blank %}
    <div class="cora-compare__overlay" style="background: {{ section.settings.overlay_color }};"></div>
  {% endif %}

  <div class="cora-compare__inner">
    <!-- Heading -->
    {% if section.settings.heading != blank %}
      {% assign highlight_color = section.settings.highlight_color | default: '#6B45E6' %}
      {% assign open_tag = '<span class="highlight" style="color:' | append: highlight_color | append: ';">' %}
      {% assign close_tag = '</span>' %}
      {% assign formatted_heading = section.settings.heading
        | replace: '[highlight]', open_tag
        | replace: '[/highlight]', close_tag
      %}
      <h2 class="cora-compare__heading" style="color: {{ section.settings.heading_color }};">
        {{ formatted_heading }}
      </h2>
    {% endif %}

    <!-- Table -->
    <div class="cora-compare__table-wrap">
      <table class="cora-compare__table">
        <thead>
          <tr>
            <th></th>
            <th class="highlight">
              {% if section.settings.col1_image != blank %}
                <img
                  src="{{ section.settings.col1_image | image_url: width: 120 }}"
                  alt="{{ section.settings.col1_title | escape }}"
                >
              {% endif %}
              {{ section.settings.col1_title }}
            </th>
            <th>{{ section.settings.col2_title }}</th>
            <th>{{ section.settings.col3_title }}</th>
          </tr>
        </thead>

        <tbody>
          {% for block in section.blocks %}
            <tr>
              <td>{{ block.settings.feature }}</td>

              <!-- Zenmies Column -->
              <td class="highlight">
                {% if block.settings.col1_svg != blank %}
                  <div class="icon-svg">{{ block.settings.col1_svg }}</div>
                {% else %}
                  {{ block.settings.col1_value }}
                {% endif %}
              </td>

              <!-- TRT Column -->
              <td>
                {% if block.settings.col2_svg != blank %}
                  <div class="icon-svg">{{ block.settings.col2_svg }}</div>
                {% else %}
                  {{ block.settings.col2_value }}
                {% endif %}
              </td>

              <!-- Other Supplements -->
              <td>
                {% if block.settings.col3_svg != blank %}
                  <div class="icon-svg">{{ block.settings.col3_svg }}</div>
                {% else %}
                  {{ block.settings.col3_value }}
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {% if section.settings.cta_text != blank %}
      <a
        href="{{ section.settings.cta_link }}"
        class="cora-compare__btn"
        style="background: {{ section.settings.cta_bg }}; color: {{ section.settings.cta_color }};"
      >
        {{ section.settings.cta_text }}
      </a>
    {% endif %}
  </div>
</section>

{{ 'cora-compare-table.css' | asset_url | stylesheet_tag }}

{% schema %}
{
  "name": "Cora Compare Table",
  "class": "cora-section cora-compare-table",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Achieve Interstellar Levels Of Testosterone Naturally With [highlight]Zenmies[/highlight]"
    },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#160E26" },
    { "type": "color", "id": "highlight_color", "label": "Highlight Text Color", "default": "#6B45E6" },

    { "type": "image_picker", "id": "bg_image", "label": "Background Image" },
    { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#FFFFFF" },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Overlay Color (use rgba for transparency)",
      "default": "rgba(255,255,255,0)"
    },

    { "type": "text", "id": "col1_title", "label": "Column 1 Title", "default": "Zenmies" },
    { "type": "image_picker", "id": "col1_image", "label": "Column 1 Image" },
    { "type": "text", "id": "col2_title", "label": "Column 2 Title", "default": "TRT" },
    { "type": "text", "id": "col3_title", "label": "Column 3 Title", "default": "Other Supplements" },

    { "type": "text", "id": "cta_text", "label": "CTA Text", "default": "TRY IT NOW" },
    { "type": "url", "id": "cta_link", "label": "CTA Link" },
    { "type": "color", "id": "cta_bg", "label": "Button Background", "default": "#6B45E6" },
    { "type": "color", "id": "cta_color", "label": "Button Text Color", "default": "#FFFFFF" }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Table Row",
      "settings": [
        { "type": "text", "id": "feature", "label": "Feature", "default": "3rd-Party Lab Tested" },
        { "type": "textarea", "id": "col1_svg", "label": "Zenmies SVG (Paste SVG Code Here)" },
        { "type": "textarea", "id": "col2_svg", "label": "TRT SVG (Paste SVG Code Here)" },
        { "type": "textarea", "id": "col3_svg", "label": "Other Supplements SVG (Paste SVG Code Here)" },
        { "type": "text", "id": "col1_value", "label": "Zenmies Text Fallback" },
        { "type": "text", "id": "col2_value", "label": "TRT Text Fallback" },
        { "type": "text", "id": "col3_value", "label": "Other Supplements Text Fallback" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Cora Compare Table",
      "category": "Zenmies",
      "blocks": [
        { "type": "row" },
        { "type": "row" },
        { "type": "row" },
        { "type": "row" },
        { "type": "row" }
      ]
    }
  ]
}
{% endschema %}
