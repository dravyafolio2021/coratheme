<section id="results-bento-{{ section.id }}" class="results-bento">
  <div class="results-bento__wrapper">
    <!-- Heading -->
    {% if section.settings.heading != blank %}
      {% assign highlight_color = section.settings.highlight_color | default: '#6B45E6' %}
      {% assign open_tag = '<span class="highlight" style="color:' | append: highlight_color | append: ';">' %}
      {% assign close_tag = '</span>' %}
      {% assign heading_html = section.settings.heading
        | replace: '[highlight]', open_tag
        | replace: '[/highlight]', close_tag
      %}
      <h2 class="results-bento__heading" style="color: {{ section.settings.heading_color }};">
        {{ heading_html }}
      </h2>
    {% endif %}

    <!-- Bento Grid -->
    <div class="results-bento__grid">
      <!-- Hero Image -->
      {% if section.settings.main_image != blank %}
        <div class="results-bento__item results-bento__image">
          <img src="{{ section.settings.main_image | image_url: width: 600 }}" alt="Hero Image" loading="lazy">
        </div>
      {% endif %}

      <!-- Testimonial Cards -->
      {% for block in section.blocks %}
        <div class="results-bento__item results-bento__card" style="background: {{ section.settings.card_bg }}">
          <div class="results-bento__card-header">
            <p class="results-bento__name">
              {{ block.settings.name }}
              {% if block.settings.verified %}
                {% render 'icon-verified' %}
                <span class="verified"> Verified Buyer</span>
              {% endif %}
            </p>
            <div class="results-bento__stars" style="--star-color: {{ section.settings.star_color }}">
              {% assign rating_num = block.settings.rating | plus: 0 %}
              {% for i in (1..5) %}
                {% if i <= rating_num %}
                  ★
                {% else %}
                  ☆
                {% endif %}
              {% endfor %}
            </div>
          </div>
          <p class="results-bento__text">{{ block.settings.review }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
</section>
<style>
  #shopify-section-{{ section.id }} {
    background-color: {{ section.settings.parent_bg_color }};
  }
</style>
{{ 'results-grid.css' | asset_url | stylesheet_tag }}

{% schema %}
{
  "name": "Results Bento",
  "class": "cora-section results-bento",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "See How 247,353+ Men Over 30 Are Burning Fat, Building Strength, And Getting Results That Show"
    },
    { "type": "color", "id": "highlight_color", "label": "Highlight Color", "default": "#6B45E6" },
{
      "type": "color",
      "id": "parent_bg_color",
      "label": "Parent Background Color",
      "default": "#F0EAFD"
    },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#160E26" },
    { "type": "image_picker", "id": "main_image", "label": "Main Image (Hero Left)" },
    { "type": "color", "id": "card_bg", "label": "Card Background", "default": "#F4F1FB" },
    { "type": "color", "id": "star_color", "label": "Star Color", "default": "#FBBF24" }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        { "type": "text", "id": "name", "label": "Name", "default": "Zarc. C" },
        { "type": "checkbox", "id": "verified", "label": "Verified Buyer", "default": true },
        { "type": "range", "id": "rating", "label": "Rating", "min": 1, "max": 5, "default": 5 },
        {
          "type": "textarea",
          "id": "review",
          "label": "Review Text",
          "default": "Didn’t feel much for the first couple weeks and was about to give up, but around day 18 I noticed some subtle changes. Wish it had kicked in sooner—it takes patience, which not everyone has."
        }
      ]
    }
  ],
  "presets": [{ "name": "Cora Results Grid", "category": "Zenmies" }]
}
{% endschema %}
