{% comment %}
  âœ… Cora FAQ (Zenmies)
  Accordion with single-open logic (radio-based). Fully responsive and customizable.
{% endcomment %}

<section
  id="cora-faq-{{ section.id }}"
  class="cora-faq"
  style="
    {% if section.settings.bg_image != blank %}
      background-image: url('{{ section.settings.bg_image | image_url: width: 2000 }}');
      background-size: cover;
      background-position: center;
    {% else %}
      background-color: {{ section.settings.bg_color }};
    {% endif %}
  "
>
  {% if section.settings.overlay_color != blank %}
    <div class="cora-faq__overlay" style="background: {{ section.settings.overlay_color }};"></div>
  {% endif %}

  <div class="cora-faq__inner">
    {% if section.settings.heading != blank %}
      <h2
        class="cora-faq__heading zhead"
        style="color: {{ section.settings.heading_color }};"
      >
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="cora-faq__list">
      {% for block in section.blocks %}
        <div class="cora-faq__item">
          <input
            type="radio"
            name="faq-group-{{ section.id }}"
            id="faq-{{ section.id }}-{{ forloop.index }}"
            class="cora-faq__toggle"
            {% if forloop.first %}checked{% endif %}
          >
          <label
            for="faq-{{ section.id }}-{{ forloop.index }}"
            class="cora-faq__question"
            style="color: {{ section.settings.question_color }};"
          >
            {{ block.settings.question }}
          </label>
          <div
            class="cora-faq__answer"
            style="color: {{ section.settings.answer_color }};"
          >
            {{ block.settings.answer }}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>
<style>
  #shopify-section-{{ section.id }} {
    background-color: {{ section.settings.parent_bg_color }};
  }
</style>
{{ 'cora-faq.css' | asset_url | stylesheet_tag }}

{% schema %}
{
  "name": "Cora FAQ",
  "settings": [
    { "type": "text", "id": "heading", "label": "Section Heading", "default": "Frequently Asked Questions" },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#160e26" },

    { "type": "image_picker", "id": "bg_image", "label": "Background Image" },
    { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#f9f8fc" },
    { "type": "color", "id": "overlay_color", "label": "Overlay Color (use rgba for transparency)", "default": "rgba(255,255,255,0)" },
{
      "type": "color",
      "id": "parent_bg_color",
      "label": "Parent Background Color",
      "default": "#f9f8fc"
    },
    { "type": "color", "id": "question_color", "label": "Question Text Color", "default": "#160e26" },
    { "type": "color", "id": "answer_color", "label": "Answer Text Color", "default": "#5b5668" },
    { "type": "color", "id": "card_bg", "label": "Card Background Color", "default": "#ebe8f2" }
  ],
  "blocks": [
    {
      "type": "faq",
      "name": "FAQ Item",
      "settings": [
        { "type": "text", "id": "question", "label": "Question", "default": "How long until I see results?" },
        { "type": "richtext", "id": "answer", "label": "Answer", "default": "<p>Zenmies is for men over 18 looking to support testosterone safely and naturally.</p>" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Cora FAQ", "category": "Zenmies",
      "blocks": [
        { "type": "faq" },
        { "type": "faq" },
        { "type": "faq" },
        { "type": "faq" }
      ]
    }
  ]
}
{% endschema %}
