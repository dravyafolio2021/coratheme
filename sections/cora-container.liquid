{%- style -%}
  .cora-container-{{ section.id }} {
    /* Layout Logic */
    display: flex;
    flex-direction: {{ section.settings.direction_desktop }};
    justify-content: {{ section.settings.justify_content }};
    align-items: {{ section.settings.align_items }};
    flex-wrap: wrap;
    gap: {{ section.settings.gap }}px;

    /* Sizing & Spacing */
    width: 100%;
    min-height: {{ section.settings.min_height }}px;
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    padding-left: {{ section.settings.padding_horizontal }}px;
    padding-right: {{ section.settings.padding_horizontal }}px;
    
    /* Decoration */
    background-color: {{ section.settings.bg_color }};
    position: relative;
    overflow: hidden;
  }

  /* Content Width Logic */
  {% if section.settings.content_width == 'boxed' %}
    .cora-container-{{ section.id }} {
      max-width: {{ section.settings.max_width }}px;
      margin-left: auto;
      margin-right: auto;
    }
  {% endif %}

  /* Mobile Responsive Overrides */
  @media screen and (max-width: 768px) {
    .cora-container-{{ section.id }} {
      flex-direction: {{ section.settings.direction_mobile }};
      padding-top: {{ section.settings.padding_top | divided_by: 2 }}px;
      padding-bottom: {{ section.settings.padding_bottom | divided_by: 2 }}px;
      min-height: {{ section.settings.min_height | divided_by: 2 }}px;
    }
  }
{%- endstyle -%}

<div class="cora-container-{{ section.id }}">
  {%- for block in section.blocks -%}
  {%- case block.type -%}
    {%- when 'heading' -%}
      {% render 'cora-heading', block: block %}
    {%- when 'text' -%}
      {% render 'cora-text', block: block %}
    {%- when 'button' -%}
      {% render 'cora-button', block: block %}
    {%- when 'image' -%}
      {% render 'cora-image', block: block %}
    {%- when 'spacer' -%}
      {% render 'cora-spacer', block: block %}
  {%- endcase -%}
{%- endfor -%}
</div>

{% schema %}
{
  "name": "Cora Container",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "content_width",
      "label": "Content Width",
      "options": [
        { "value": "boxed", "label": "Boxed" },
        { "value": "full", "label": "Full Width" }
      ],
      "default": "boxed"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 500,
      "max": 1600,
      "step": 20,
      "unit": "px",
      "label": "Max Width (if Boxed)",
      "default": 1200
    },
    {
      "type": "range",
      "id": "min_height",
      "min": 0,
      "max": 1000,
      "step": 20,
      "unit": "px",
      "label": "Min Height",
      "default": 400
    },
    {
      "type": "header",
      "content": "Flexbox Settings (The Magic)"
    },
    {
      "type": "select",
      "id": "direction_desktop",
      "label": "Direction (Desktop)",
      "options": [
        { "value": "row", "label": "Row (Horizontal)" },
        { "value": "column", "label": "Column (Vertical)" },
        { "value": "row-reverse", "label": "Row Reverse" },
        { "value": "column-reverse", "label": "Column Reverse" }
      ],
      "default": "row"
    },
    {
      "type": "select",
      "id": "direction_mobile",
      "label": "Direction (Mobile)",
      "options": [
        { "value": "row", "label": "Row" },
        { "value": "column", "label": "Column" }
      ],
      "default": "column"
    },
    {
      "type": "select",
      "id": "justify_content",
      "label": "Justify Content (Main Axis)",
      "options": [
        { "value": "flex-start", "label": "Start" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "End" },
        { "value": "space-between", "label": "Space Between" },
        { "value": "space-around", "label": "Space Around" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "align_items",
      "label": "Align Items (Cross Axis)",
      "options": [
        { "value": "flex-start", "label": "Start" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "End" },
        { "value": "stretch", "label": "Stretch" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "gap",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Gap between items",
      "default": 20
    },
    {
      "type": "header",
      "content": "Spacing & Style"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#f4f4f4"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Horizontal",
      "default": 20
    }
  ],
  "blocks": [
   {
  "type": "heading",
  "name": "Heading",
  "settings": [
    { "type": "text", "id": "heading_text", "label": "Text", "default": "Add Your Heading" },
    { "type": "select", "id": "html_tag", "label": "HTML Tag", "options": [
      { "value": "h1", "label": "H1" }, { "value": "h2", "label": "H2" }, { "value": "h3", "label": "H3" },
      { "value": "h4", "label": "H4" }, { "value": "div", "label": "div" }
    ], "default": "h2" },
    { "type": "range", "id": "font_size", "min": 12, "max": 100, "step": 1, "unit": "px", "label": "Font Size", "default": 32 },
    { "type": "range", "id": "font_weight", "min": 100, "max": 900, "step": 100, "label": "Font Weight", "default": 700 },
    { "type": "color", "id": "text_color", "label": "Color", "default": "#000000" },
    { "type": "select", "id": "alignment", "label": "Alignment", "options": [
      { "value": "left", "label": "Left" }, { "value": "center", "label": "Center" }, { "value": "right", "label": "Right" }
    ], "default": "center" },
    { "type": "range", "id": "padding_y", "min": 0, "max": 50, "step": 1, "unit": "px", "label": "Vertical Padding", "default": 10 }
  ]
},
{
  "type": "text",
  "name": "Text Editor",
  "settings": [
    { "type": "richtext", "id": "text_content", "label": "Content", "default": "<p>Lorem ipsum dolor sit amet.</p>" },
    { "type": "color", "id": "text_color", "label": "Color", "default": "#333333" },
    { "type": "select", "id": "alignment", "label": "Alignment", "options": [
      { "value": "left", "label": "Left" }, { "value": "center", "label": "Center" }, { "value": "right", "label": "Right" }, { "value": "justify", "label": "Justified" }
    ], "default": "left" }
  ]
},{
  "type": "button",
  "name": "Button",
  "settings": [
    { "type": "text", "id": "label", "label": "Label", "default": "Click Me" },
    { "type": "url", "id": "link", "label": "Link" },
    { "type": "color", "id": "bg_color", "label": "Background", "default": "#000000" },
    { "type": "color", "id": "text_color", "label": "Text Color", "default": "#ffffff" },
    { "type": "range", "id": "border_radius", "min": 0, "max": 50, "step": 1, "unit": "px", "label": "Radius", "default": 5 },
    { "type": "range", "id": "padding_x", "min": 10, "max": 60, "step": 1, "unit": "px", "label": "Width Padding", "default": 30 },
    { "type": "range", "id": "padding_y", "min": 5, "max": 30, "step": 1, "unit": "px", "label": "Height Padding", "default": 12 },
    { "type": "select", "id": "alignment", "label": "Alignment", "options": [
      { "value": "left", "label": "Left" }, { "value": "center", "label": "Center" }, { "value": "right", "label": "Right" }
    ], "default": "left" }
  ]
},{
  "type": "image",
  "name": "Image",
  "settings": [
    { "type": "image_picker", "id": "image", "label": "Image" },
    { "type": "range", "id": "width", "min": 10, "max": 100, "step": 5, "unit": "%", "label": "Width", "default": 100 },
    { "type": "range", "id": "border_radius", "min": 0, "max": 50, "step": 1, "unit": "px", "label": "Corner Radius", "default": 0 },
    { "type": "select", "id": "alignment", "label": "Alignment", "options": [
      { "value": "left", "label": "Left" }, { "value": "center", "label": "Center" }, { "value": "right", "label": "Right" }
    ], "default": "center" }
  ]
},
{
  "type": "spacer",
  "name": "Spacer",
  "settings": [
    { "type": "range", "id": "height", "min": 10, "max": 200, "step": 5, "unit": "px", "label": "Height", "default": 50 }
  ]
}

  ],
  "presets": [
    {
      "name": "Cora Container",
      "blocks": [
        { "type": "heading" },
        { "type": "text" },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}