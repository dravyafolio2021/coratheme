{%- style -%}
  .cora-container-{{ section.id }} {
    /* Layout Logic */
    display: flex;
    flex-direction: {{ section.settings.direction_desktop }};
    justify-content: {{ section.settings.justify_content }};
    align-items: {{ section.settings.align_items }};
    flex-wrap: wrap;
    gap: {{ section.settings.gap }}px;

    /* Sizing & Spacing */
    width: 100%;
    min-height: {{ section.settings.min_height }}px;
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    padding-left: {{ section.settings.padding_horizontal }}px;
    padding-right: {{ section.settings.padding_horizontal }}px;
    
    /* Decoration */
    background-color: {{ section.settings.bg_color }};
    position: relative;
    overflow: hidden;
  }

  /* Content Width Logic */
  {% if section.settings.content_width == 'boxed' %}
    .cora-container-{{ section.id }} {
      max-width: {{ section.settings.max_width }}px;
      margin-left: auto;
      margin-right: auto;
    }
  {% endif %}

  /* Mobile Responsive Overrides */
  @media screen and (max-width: 768px) {
    .cora-container-{{ section.id }} {
      flex-direction: {{ section.settings.direction_mobile }};
      padding-top: {{ section.settings.padding_top | divided_by: 2 }}px;
      padding-bottom: {{ section.settings.padding_bottom | divided_by: 2 }}px;
      min-height: {{ section.settings.min_height | divided_by: 2 }}px;
    }
  }
{%- endstyle -%}

<div class="cora-container-{{ section.id }}">
  {%- for block in section.blocks -%}
    {%- case block.type -%}
      {%- when 'heading' -%}
        <h2 style="color: {{ block.settings.color }}; margin:0;">{{ block.settings.text }}</h2>
      {%- when 'text' -%}
        <div style="color: {{ block.settings.color }};">{{ block.settings.text }}</div>
      {%- when 'button' -%}
        <a href="{{ block.settings.link }}" style="padding: 10px 20px; background: #000; color: #fff; text-decoration: none;">{{ block.settings.label }}</a>
    {%- endcase -%}
  {%- endfor -%}
</div>

{% schema %}
{
  "name": "Cora Container",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "content_width",
      "label": "Content Width",
      "options": [
        { "value": "boxed", "label": "Boxed" },
        { "value": "full", "label": "Full Width" }
      ],
      "default": "boxed"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 500,
      "max": 1600,
      "step": 20,
      "unit": "px",
      "label": "Max Width (if Boxed)",
      "default": 1200
    },
    {
      "type": "range",
      "id": "min_height",
      "min": 0,
      "max": 1000,
      "step": 20,
      "unit": "px",
      "label": "Min Height",
      "default": 400
    },
    {
      "type": "header",
      "content": "Flexbox Settings (The Magic)"
    },
    {
      "type": "select",
      "id": "direction_desktop",
      "label": "Direction (Desktop)",
      "options": [
        { "value": "row", "label": "Row (Horizontal)" },
        { "value": "column", "label": "Column (Vertical)" },
        { "value": "row-reverse", "label": "Row Reverse" },
        { "value": "column-reverse", "label": "Column Reverse" }
      ],
      "default": "row"
    },
    {
      "type": "select",
      "id": "direction_mobile",
      "label": "Direction (Mobile)",
      "options": [
        { "value": "row", "label": "Row" },
        { "value": "column", "label": "Column" }
      ],
      "default": "column"
    },
    {
      "type": "select",
      "id": "justify_content",
      "label": "Justify Content (Main Axis)",
      "options": [
        { "value": "flex-start", "label": "Start" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "End" },
        { "value": "space-between", "label": "Space Between" },
        { "value": "space-around", "label": "Space Around" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "align_items",
      "label": "Align Items (Cross Axis)",
      "options": [
        { "value": "flex-start", "label": "Start" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "End" },
        { "value": "stretch", "label": "Stretch" }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "gap",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Gap between items",
      "default": 20
    },
    {
      "type": "header",
      "content": "Spacing & Style"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#f4f4f4"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Horizontal",
      "default": 20
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "settings": [
        { "type": "text", "id": "text", "label": "Text", "default": "Hello World" },
        { "type": "color", "id": "color", "label": "Color", "default": "#000000" }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        { "type": "richtext", "id": "text", "label": "Content", "default": "<p>Add your text here</p>" },
        { "type": "color", "id": "color", "label": "Color", "default": "#333333" }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": [
        { "type": "text", "id": "label", "label": "Label", "default": "Click Me" },
        { "type": "url", "id": "link", "label": "Link" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Cora Container",
      "blocks": [
        { "type": "heading" },
        { "type": "text" },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}